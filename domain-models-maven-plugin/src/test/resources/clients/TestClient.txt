
package org.folio.rest.client;

import java.math.BigDecimal;
import java.time.ZoneId;
import java.time.ZonedDateTime;
import java.time.format.DateTimeFormatter;
import java.util.Date;
import io.vertx.core.AsyncResult;
import io.vertx.core.Future;
import io.vertx.core.Handler;
import io.vertx.core.buffer.Buffer;
import io.vertx.core.http.HttpClient;
import io.vertx.ext.web.client.HttpResponse;
import io.vertx.ext.web.client.WebClient;
import io.vertx.ext.web.client.WebClientOptions;
import org.folio.rest.tools.utils.VertxUtils;
import org.folio.util.PercentCodec;


/**
 * Auto-generated code - based on class org.folio.rest.jaxrs.resource.TestResource
 *
 */
public class TestResourceClient {

    private final String tenantId;
    private final String token;
    private final String okapiUrl;
    private final WebClient webClient;

    /**
     * Reuse a WebClient.
     *
     */
    public TestResourceClient(String okapiUrl, String tenantId, String token, WebClient webClient) {
        // Auto-generated code
        // - generated by       org.folio.rest.tools.ClientGenerator
        // - generated based on org.folio.rest.jaxrs.resource.TestResourceResource
        this.okapiUrl = okapiUrl;
        this.tenantId = tenantId;
        this.token = token;
        this.webClient = webClient;
    }
    
    /**
     * Reuse an HttpClient.
     *
     */
    public TestResourceClient(String okapiUrl, String tenantId, String token, HttpClient httpClient) {
        // Auto-generated code
        // - generated by       org.folio.rest.tools.ClientGenerator
        // - generated based on org.folio.rest.jaxrs.resource.TestResourceResource
        this(okapiUrl, tenantId, token, WebClient.wrap(httpClient));
    }
    
    /**
     * @deprecated Use a constructor that takes a WebClient or an HttpClient
     *         to allow for pooling and pipelining. Best practice is one WebClient (or HttpClient) that
     *         is reused until the Verticle closes.
     *
     */
    @Deprecated
    public TestResourceClient(String okapiUrl, String tenantId, String token, boolean keepAlive, int connTO, int idleTO) {
        // Auto-generated code
        // - generated by       org.folio.rest.tools.ClientGenerator
        // - generated based on org.folio.rest.jaxrs.resource.TestResourceResource
        this.tenantId = tenantId;
        this.token = token;
        this.okapiUrl = okapiUrl;
        WebClientOptions options = new WebClientOptions();
        options.setLogActivity(true);
        options.setKeepAlive(keepAlive);
        options.setConnectTimeout(connTO);
        options.setIdleTimeout(idleTO);
        webClient = WebClient.create(VertxUtils.getVertxFromContextOrNew(), options);
    }

    /**
     * @deprecated Use a constructor that takes a WebClient or an HttpClient
     *         to allow for pooling and pipelining. Best practice is one WebClient (or HttpClient) that
     *         is reused until the Verticle closes.
     *
     */
    @Deprecated
    public TestResourceClient(String okapiUrl, String tenantId, String token, boolean keepAlive) {
        // Auto-generated code
        // - generated by       org.folio.rest.tools.ClientGenerator
        // - generated based on org.folio.rest.jaxrs.resource.TestResourceResource
        this(okapiUrl, tenantId, token, keepAlive, 2000, 5000);
    }

    /**
     * @deprecated Use a constructor that takes a WebClient or an HttpClient
     *         to allow for pooling and pipelining. Best practice is one WebClient (or HttpClient) that
     *         is reused until the Verticle closes.
     *
     */
    @Deprecated
    public TestResourceClient(String okapiUrl, String tenantId, String token) {
        // Auto-generated code
        // - generated by       org.folio.rest.tools.ClientGenerator
        // - generated based on org.folio.rest.jaxrs.resource.TestResourceResource
        this(okapiUrl, tenantId, token, true, 2000, 5000);
    }

    /**
     * @deprecated Use a constructor that takes a WebClient or an HttpClient
     *         to allow for pooling and pipelining. Best practice is one WebClient (or HttpClient) that
     *         is reused until the Verticle closes.
     *
     */
    @Deprecated
    public TestResourceClient(String host, int port, String tenantId, String token, boolean keepAlive, int connTO, int idleTO) {
        // Auto-generated code
        // - generated by       org.folio.rest.tools.ClientGenerator
        // - generated based on org.folio.rest.jaxrs.resource.TestResourceResource
        this(((("http://"+ host)+":")+ port), tenantId, token, keepAlive, connTO, idleTO);
    }

    /**
     * @deprecated Use a constructor that takes a WebClient or an HttpClient
     *         to allow for pooling and pipelining. Best practice is one WebClient (or HttpClient) that
     *         is reused until the Verticle closes.
     *
     */
    @Deprecated
    public TestResourceClient(String host, int port, String tenantId, String token, boolean keepAlive) {
        // Auto-generated code
        // - generated by       org.folio.rest.tools.ClientGenerator
        // - generated based on org.folio.rest.jaxrs.resource.TestResourceResource
        this(host, port, tenantId, token, keepAlive, 2000, 5000);
    }

    /**
     * @deprecated Use a constructor that takes a WebClient or an HttpClient
     *         to allow for pooling and pipelining. Best practice is one WebClient (or HttpClient) that
     *         is reused until the Verticle closes.
     *
     */
    @Deprecated
    public TestResourceClient(String host, int port, String tenantId, String token) {
        // Auto-generated code
        // - generated by       org.folio.rest.tools.ClientGenerator
        // - generated based on org.folio.rest.jaxrs.resource.TestResourceResource
        this(host, port, tenantId, token, true, 2000, 5000);
    }

    /**
     * Convenience constructor for tests ONLY!
     *
     * Connect to localhost on 8081 as folio_demo tenant.
     *
     * @deprecated Use a constructor that takes a WebClient or an HttpClient
     *         to allow for pooling and pipelining. Best practice is one WebClient (or HttpClient) that
     *         is reused until the Verticle closes.
     *
     */
    @Deprecated
    public TestResourceClient() {
        // Auto-generated code
        // - generated by       org.folio.rest.tools.ClientGenerator
        // - generated based on org.folio.rest.jaxrs.resource.TestResourceResource
        this("localhost", 8081, "folio_demo", "folio_demo", false, 2000, 5000);
    }

    /**
     * Service endpoint unittests
     *
     */
    public void getRmbtests(String name, Boolean success, Handler<AsyncResult<HttpResponse<Buffer>>> responseHandler) {
        // Auto-generated code
        // - generated by       org.folio.rest.tools.ClientGenerator
        // - generated based on org.folio.rest.jaxrs.resource.TestResourceResource
        getRmbtests(name, success).onComplete(responseHandler);
    }

    /**
     * Service endpoint "unittests"+queryParams.toString()
     *
     */
    public Future<HttpResponse<Buffer>> getRmbtests(String name, Boolean success) {
        // Auto-generated code
        // - generated by       org.folio.rest.tools.ClientGenerator
        // - generated based on org.folio.rest.jaxrs.resource.TestResourceResource
        StringBuilder queryParams = new StringBuilder("?");
        if (name!= null) {
            queryParams.append("name=");
            queryParams.append(PercentCodec.encode(name));
            queryParams.append("&");
        }
        if (success!= null) {
            queryParams.append("success=");
            queryParams.append(success);
            queryParams.append("&");
        }
        io.vertx.ext.web.client.HttpRequest<Buffer> request = webClient.requestAbs(io.vertx.core.http.HttpMethod.GET, okapiUrl+"unittests"+queryParams.toString());
        request.putHeader("Accept", "application/json");
        if (tenantId!= null) {
            request.putHeader("X-Okapi-Token", token);
            request.putHeader("x-okapi-tenant", tenantId);
        }
        if (okapiUrl!= null) {
            request.putHeader("X-Okapi-Url", okapiUrl);
        }
        return request.send();
    }

    /**
     * Service endpoint unittestsbooks
     *
     */
    public void getRmbtestsBooks(String author, Date publicationDate, BigDecimal rating, String isbn, String[] facets, Handler<AsyncResult<HttpResponse<Buffer>>> responseHandler) {
        // Auto-generated code
        // - generated by       org.folio.rest.tools.ClientGenerator
        // - generated based on org.folio.rest.jaxrs.resource.TestResourceResource
        getRmbtestsBooks(author, publicationDate, rating, isbn, facets).onComplete(responseHandler);
    }

    /**
     * Service endpoint "unittestsbooks"+queryParams.toString()
     *
     */
    public Future<HttpResponse<Buffer>> getRmbtestsBooks(String author, Date publicationDate, BigDecimal rating, String isbn, String[] facets) {
        // Auto-generated code
        // - generated by       org.folio.rest.tools.ClientGenerator
        // - generated based on org.folio.rest.jaxrs.resource.TestResourceResource
        StringBuilder queryParams = new StringBuilder("?");
        if (author!= null) {
            queryParams.append("author=");
            queryParams.append(PercentCodec.encode(author));
            queryParams.append("&");
        }
        if (publicationDate!= null) {
            queryParams.append("publicationDate=");
            queryParams.append(DateTimeFormatter.ISO_LOCAL_DATE_TIME.format(ZonedDateTime.ofInstant(publicationDate.toInstant(), ZoneId.of("UTC"))));
            queryParams.append("&");
        }
        if (rating!= null) {
            queryParams.append("rating=");
            queryParams.append(rating);
            queryParams.append("&");
        }
        if (isbn!= null) {
            queryParams.append("isbn=");
            queryParams.append(PercentCodec.encode(isbn));
            queryParams.append("&");
        }
        if (facets!= null) {
            queryParams.append("facets=");
            if(facets.getClass().isArray()){queryParams.append(String.join("&facets=",facets));}
            queryParams.append("&");
        }
        io.vertx.ext.web.client.HttpRequest<Buffer> request = webClient.requestAbs(io.vertx.core.http.HttpMethod.GET, okapiUrl+"unittestsbooks"+queryParams.toString());
        request.putHeader("Accept", "application/json");
        if (tenantId!= null) {
            request.putHeader("X-Okapi-Token", token);
            request.putHeader("x-okapi-tenant", tenantId);
        }
        if (okapiUrl!= null) {
            request.putHeader("X-Okapi-Url", okapiUrl);
        }
        return request.send();
    }

}
